function EventEmitter(){}EventEmitter.prototype.on=function(e,d){if(!this["emitter"+e]){this["emitter"+e]=[]}var b=this["emitter"+e];for(var c=0;c<b.length;c++){if(b[c]==d){return this}}b.push(d);return this};EventEmitter.prototype.fire=function(d,f){var b=this["emitter"+d];if(b){for(var c=0;c<b.length;c++){if(typeof b[c]=="function"){b[c].call(this,f)}else{b.splice(c,1);c--}}}};EventEmitter.prototype.off=function(e,d){var b=this["emitter"+e];if(b){for(var c=0;c<b.length;c++){if(b[c]==d){b[c]=null;return this}}}return this};function Drag(a){this.x=null;this.y=null;this.mx=null;this.my=null;this.ele=a;this.DOWN=processThis(this.down,this);this.MOVE=processThis(this.move,this);this.UP=processThis(this.up,this);on(this.ele,"mousedown",this.DOWN)}Drag.prototype=new EventEmitter;Drag.prototype.down=function(a){this.x=this.ele.offsetLeft;this.y=this.ele.offsetTop;this.mx=a.pageX;this.my=a.pageY;if(this.ele.setCapture){this.ele.setCapture();on(this.ele,"mousemove",this.MOVE);on(this.ele,"mouseup",this.UP)}else{on(document,"mousemove",this.MOVE);on(document,"mouseup",this.UP)}a.preventDefault();this.fire("dragstart",a)};Drag.prototype.move=function(a){this.ele.style.left=a.pageX-this.mx+this.x+"px";this.ele.style.top=a.pageY-this.my+this.y+"px";this.fire("dragging",a)};Drag.prototype.up=function(a){if(this.ele.releaseCapture){this.ele.releaseCapture();off(this.ele,"mousemove",this.MOVE);off(this.ele,"mouseup",this.UP)}else{off(document,"mousemove",this.MOVE);off(document,"mouseup",this.UP)}this.fire("dragend",a)};Drag.prototype.addRange=function(a){this.oRange=a;this.on("dragging",this.range)};Drag.prototype.range=function(a){if(this.ele.offsetLeft<=this.oRange.left){this.ele.style.left=this.oRange.left+"px"}else{if(this.ele.offsetLeft>=this.oRange.right){this.ele.style.left=this.oRange.right+"px"}}if(this.ele.offsetTop<=this.oRange.top){this.ele.style.top=this.oRange.top+"px"}else{if(this.ele.offsetTop>=this.oRange.bottom){this.ele.style.top=this.oRange.bottom+"px"}}};Drag.prototype.border=function(){this.on("dragstart",this.addBorder);this.on("dragend",this.removeBorder)};Drag.prototype.addBorder=function(){this.ele.style.border="3px dashed blue"};Drag.prototype.removeBorder=function(){this.ele.style.border="none"};